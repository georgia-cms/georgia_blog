<%= content_for :ujs do %>
<%= render 'new' %>
<% end -%>

<h1 class="page-header">
  <% if can? :create, Kennedy::Post %>
  <div class="pull-right">
    <%= link_to "#{icon_tag('icon-plus-sign')} Add Post".html_safe, '#new_post', class: 'btn btn-primary js-new-post', role: 'button', data: {toggle: 'modal'} %>
  </div>
  <% end -%>
  Posts
</h1>


<div class='row-fluid'>
  <div class='span6'>
    <%= paginate @posts %>
  </div>
  <div class='span6'>
    <div class="pull-right">
      <%= render 'kennedy/shared/search/posts' %>
    </div>
  </div>
</div>

<table class="table table-hover">
  <thead>
    <th>Title</th>
    <th>Content</th>
    <th>URL</th>
    <th>Status</th>
    <th></th>
  </thead>
  <tbody>
    <% if @posts and @posts.any? %>
    <% @posts.each do |post| %>
    <tr class="post <%= post.status.try(:label) %>">
      <td>
        <%= post.title %>
      </td>
      <td>
        <%= post.excerpt %>
      </td>
      <td>
        <%= post.url %>
      </td>
      <td class="labels">
        <%= post.status_tag %>
      </td>
      <td class="actions">
        <%= link_to_group_edit post, publish: true, review: true, delete: true %>
      </td>
    </tr>

    <% end -%>
    <% else %>
    <tr>
      <td colspan="6">
        There are currently no posts. <%= link_to 'Create a new one', '#new_post', class: 'js-new-post', data: {toggle: 'modal'} %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @posts %>

<%= link_to "#{icon_tag('icon-plus-sign')} Add Post".html_safe, '#new_post', class: 'btn btn-primary js-new-post', role: 'button', data: {toggle: 'modal'} %>